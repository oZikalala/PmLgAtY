<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Watch Movie Online HD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Watch movies and TV series online in HD quality.">
<link rel="canonical" id="canonicalLink">
</head>

<body style="background:#111;color:#fff;font-family:Arial;padding:20px">

<h1 id="movieTitle">Loading...</h1>
<p id="movieTagline"></p>

<div id="playerWrapper" style="margin-top:20px;">
<iframe id="streamPlayer" width="100%" height="500" frameborder="0" allowfullscreen></iframe>
</div>

<div id="movieDetail"></div>

<script>
const apiKey = "e0b203e42e12587b6ce507b8aa452e8c";

// ==========================
// SUPPORT GITHUB 404 REDIRECT
// ==========================
if (window.location.hash) {
  const cleanPath = window.location.hash.substring(1);
  history.replaceState(null, null, cleanPath);
}

// ==========================
// PARSE CLEAN URL
// ==========================
const pathParts = window.location.pathname.split('/').filter(Boolean);

let movieId = null;
let tvId = null;
let seasonNumber = 1;
let episodeNumber = 1;

if (pathParts.length === 1 && /^\d+$/.test(pathParts[0])) {
  movieId = pathParts[0];
}

if (pathParts[0] === "tv" && pathParts.length >= 2) {
  tvId = pathParts[1];
  seasonNumber = pathParts[2] || 1;
  episodeNumber = pathParts[3] || 1;
}

// ==========================
// SET CANONICAL
// ==========================
document.getElementById("canonicalLink").href = window.location.href;

const streamPlayer = document.getElementById("streamPlayer");
const container = document.getElementById("movieDetail");


// ==========================
// MOVIE MODE
// ==========================
if (movieId) {

fetch(`https://api.themoviedb.org/3/movie/${movieId}?api_key=${apiKey}&language=en-US`)
.then(res => res.json())
.then(movie => {

document.title = movie.title + " (" + new Date(movie.release_date).getFullYear() + ")";
document.getElementById("movieTitle").textContent = movie.title;
document.getElementById("movieTagline").textContent = movie.tagline || "";

streamPlayer.src = `https://vidsrc.cc/v2/embed/movie/${movie.id}`;

container.innerHTML = `
<img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" width="200"><br><br>
<p>${movie.overview}</p>
<p><strong>Rating:</strong> ${movie.vote_average}</p>
`;

})
.catch(() => showError());

}


// ==========================
// TV MODE
// ==========================
else if (tvId) {

fetch(`https://api.themoviedb.org/3/tv/${tvId}?api_key=${apiKey}&language=en-US`)
.then(res => res.json())
.then(tv => {

document.title = tv.name + " S" + seasonNumber + "E" + episodeNumber;
document.getElementById("movieTitle").textContent =
tv.name + " - Season " + seasonNumber + " Episode " + episodeNumber;

streamPlayer.src =
`https://vidsrc.cc/v2/embed/tv/${tvId}/${seasonNumber}/${episodeNumber}`;

container.innerHTML = `
<img src="https://image.tmdb.org/t/p/w500${tv.poster_path}" width="200"><br><br>
<p>${tv.overview}</p>
`;

})
.catch(() => showError());

}


// ==========================
// NO ID
// ==========================
else {
showError();
}


// ==========================
function showError() {
document.body.innerHTML = `
<div style="text-align:center;margin-top:50px;">
<h2>ðŸŽ¬ Content Not Found</h2>
<p>The movie or TV series youâ€™re looking for is unavailable.</p>
<a href="/" style="color:yellow;">â¬… Back to Home</a>
</div>
`;
}
</script>

</body>
</html>
